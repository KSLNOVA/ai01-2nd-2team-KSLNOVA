<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>운동 자세 AI Agent (CDN)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- React 18 CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel: 브라우저에서 JSX 변환 -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
        background: #f9fafb;
      }
    </style>
    <!-- env.js가 있으면 여기서 window.ENV를 주입합니다 (없어도 무시) -->
    <script src="./env.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/javascript">
      // env.js에서 넣어주면 그대로 사용, 없으면 아래 기본값 사용
      window.ENV =
        window.ENV ||
        {
          YOUTUBE_API_KEY: '', // 예: 'AIza...'
          OPENAI_API_KEY: '', // 예: 'sk-...'
        };
    </script>
    <script type="text/babel">
      const { useEffect, useRef, useState } = React;

      const YOUTUBE_API_KEY = window.ENV?.YOUTUBE_API_KEY || '';
      const OPENAI_API_KEY = window.ENV?.OPENAI_API_KEY || '';

      const EXERCISES = ['플랭크', '스쿼트'];
      const FALLBACK_YT = 'https://www.youtube.com/embed/bm5Zbmr34yw';
      const YT_QUERY_MAP = {
        플랭크: '플랭크 운동 자세',
        스쿼트: '스쿼트 운동 자세',
      };

      // 임시 지난 운동 기록 (나중에 백엔드로 교체)
      const DUMMY_HISTORY = [
        { date: '2025-12-04', exercise: '플랭크', set: '3세트', summary: '허리 각도 안정적' },
        { date: '2025-12-03', exercise: '플랭크', set: '2세트', summary: '어깨 살짝 내려주기' },
        { date: '2025-12-02', exercise: '스쿼트', set: '4세트', summary: '무릎 안쪽 모임 주의' },
      ];

      function App() {
        const [exercise, setExercise] = useState('플랭크');
        const [youtubeUrl, setYoutubeUrl] = useState(FALLBACK_YT);
        const [history, setHistory] = useState(
          DUMMY_HISTORY.filter((h) => h.exercise === '플랭크'),
        );
        const [feedback, setFeedback] = useState('웹캠을 켜면 자세 피드백이 여기에 표시됩니다.');
        const [chatMessages, setChatMessages] = useState([]);
        const [chatInput, setChatInput] = useState('');
        const [isChatting, setIsChatting] = useState(false);
        const [youtubeError, setYoutubeError] = useState('');
        const [showLeft, setShowLeft] = useState(true);
        const [showRight, setShowRight] = useState(true);
        const [ttsEnabled, setTtsEnabled] = useState(false);
        const [ttsSupported, setTtsSupported] = useState(true);

        const videoRef = useRef(null);
        const synthRef = useRef(null);
        const lastSpokenRef = useRef('');
        const hasOpenAI = Boolean(OPENAI_API_KEY);
        const hasYouTube = Boolean(YOUTUBE_API_KEY);

        // 운동 변경 시 YouTube 검색 + 지난 운동 기록 갱신
        useEffect(() => {
          let cancelled = false;

          async function fetchYoutube() {
            setYoutubeError('');

            if (!YOUTUBE_API_KEY) {
              setYoutubeUrl(FALLBACK_YT);
              setYoutubeError('YOUTUBE_API_KEY가 없어 기본 영상을 사용합니다.');
              return;
            }

            const query = YT_QUERY_MAP[exercise] || `${exercise} 운동 자세`;
            const params = new URLSearchParams({
              part: 'snippet',
              q: query,
              type: 'video',
              maxResults: '1',
              videoEmbeddable: 'true',
              key: YOUTUBE_API_KEY,
            });

            try {
              const resp = await fetch(
                `https://www.googleapis.com/youtube/v3/search?${params.toString()}`,
              );
              if (!resp.ok) throw new Error(`YouTube API 실패 (${resp.status})`);
              const data = await resp.json();
              const items = data?.items || [];
              if (!items.length) {
                setYoutubeUrl(FALLBACK_YT);
                setYoutubeError('검색 결과가 없어 기본 영상을 사용합니다.');
                return;
              }
              const videoId = items[0]?.id?.videoId;
              if (!videoId) {
                setYoutubeUrl(FALLBACK_YT);
                setYoutubeError('videoId가 없어 기본 영상을 사용합니다.');
                return;
              }
              if (!cancelled) setYoutubeUrl(`https://www.youtube.com/embed/${videoId}`);
            } catch (err) {
              console.error('YouTube API error:', err);
              setYoutubeUrl(FALLBACK_YT);
              setYoutubeError('YouTube API 호출 중 오류가 발생하여 기본 영상을 사용합니다.');
            }
          }

          fetchYoutube();
          setHistory(DUMMY_HISTORY.filter((h) => h.exercise === exercise));
          setFeedback(`${exercise} 자세 분석 예시: 코어를 조금 더 조여 주세요.`);

          return () => {
            cancelled = true;
          };
        }, [exercise]);

        // 웹캠 시작
        useEffect(() => {
          async function initCamera() {
            if (!videoRef.current) return;
            try {
              const stream = await navigator.mediaDevices.getUserMedia({ video: true });
              videoRef.current.srcObject = stream;
            } catch (err) {
              console.error('Camera error:', err);
            }
          }
          initCamera();

          return () => {
            if (videoRef.current && videoRef.current.srcObject) {
              videoRef.current.srcObject.getTracks().forEach((t) => t.stop());
            }
          };
        }, []);

        // TTS 준비
        useEffect(() => {
          if (typeof window === 'undefined') return;
          if (!('speechSynthesis' in window)) {
            setTtsSupported(false);
            return;
          }
          synthRef.current = window.speechSynthesis;
          return () => {
            synthRef.current?.cancel?.();
          };
        }, []);

        const speakFeedback = (text) => {
          if (!ttsEnabled || !synthRef.current || !ttsSupported) return;
          const say = (text || '').trim();
          if (!say) return;
          synthRef.current.cancel();
          const u = new SpeechSynthesisUtterance(say);
          u.lang = 'ko-KR';
          u.rate = 1.0;
          u.pitch = 1.0;
          synthRef.current.speak(u);
          lastSpokenRef.current = say;
        };

        // 피드백이 바뀌면 자동으로 읽어주기
        useEffect(() => {
          if (!ttsEnabled) return;
          if (!feedback?.trim()) return;
          if (lastSpokenRef.current === feedback.trim()) return;
          speakFeedback(feedback);
        }, [feedback, ttsEnabled]);

        // 채팅 전송 (OpenAI API 사용)
        const handleSend = async () => {
          const text = chatInput.trim();
          if (!text) return;
          if (isChatting) return;

          const userMsg = { role: 'user', content: text };
          setChatMessages((prev) => [...prev, userMsg]);
          setChatInput('');

          if (!OPENAI_API_KEY) {
            const botMsg = {
              role: 'assistant',
              content: 'OPENAI_API_KEY가 설정되지 않아 기본 안내만 제공합니다. 상단 스크립트에서 키를 넣어주세요.',
            };
            setChatMessages((prev) => [...prev, botMsg]);
            return;
          }

          setIsChatting(true);
          try {
            const messages = [
              {
                role: 'system',
                content: '너는 운동 자세를 알려주는 트레이너야. 전문적이지만 말은 쉽게, 한국어로 답변해.',
              },
              ...chatMessages,
              userMsg,
            ].map((m) => ({
              role: m.role,
              content: m.role === 'user' ? `[현재 운동: ${exercise}] ${m.content}` : m.content,
            }));

            const resp = await fetch('https://api.openai.com/v1/chat/completions', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                Authorization: `Bearer ${OPENAI_API_KEY}`,
              },
              body: JSON.stringify({
                model: 'gpt-4o-mini',
                messages,
              }),
            });

            if (!resp.ok) {
              throw new Error(`OpenAI API 실패 (${resp.status})`);
            }
            const data = await resp.json();
            const replyText = data?.choices?.[0]?.message?.content || '응답을 파싱하지 못했습니다.';
            const botMsg = { role: 'assistant', content: replyText };
            setChatMessages((prev) => [...prev, botMsg]);
          } catch (err) {
            console.error('OpenAI API error:', err);
            const botMsg = {
              role: 'assistant',
              content: `LLM 호출 중 오류가 발생했습니다: ${err.message || err}`,
            };
            setChatMessages((prev) => [...prev, botMsg]);
          } finally {
            setIsChatting(false);
          }
        };

        return (
          <div style={styles.page}>
            <div style={styles.backdropGlowA} />
            <div style={styles.backdropGlowB} />
            <header style={styles.header}>
              <div>
                <p style={styles.kicker}>AI Posture Coach</p>
                <h1 style={styles.title}>운동 자세 AI Agent</h1>
                <p style={styles.subtitle}>실시간 자세 피드백 · LLM 코칭 · 맞춤 추천 영상</p>
              </div>
              <div style={styles.badge}>Beta</div>
            </header>

            <div style={styles.statusRow}>
              <div style={styles.heroCard}>
                <div style={styles.heroTop}>
                  <div>
                    <p style={styles.kicker}>현재 운동</p>
                    <h2 style={styles.heroTitle}>{exercise}</h2>
                    <p style={styles.statHint}>추천 영상과 히스토리가 연동됩니다</p>
                  </div>
                  <div style={styles.heroBadge}>Live</div>
                </div>
                <div style={styles.heroBottom}>
                  <div style={styles.heroMetric}>
                    <span style={styles.heroMetricLabel}>포커스</span>
                    <span style={styles.heroMetricValue}>82%</span>
                  </div>
                  <div style={styles.heroMetric}>
                    <span style={styles.heroMetricLabel}>세션 모드</span>
                    <span style={styles.heroMetricValue}>코칭</span>
                  </div>
                  <div style={styles.heroMetric}>
                    <span style={styles.heroMetricLabel}>콜렉션</span>
                    <span style={styles.heroMetricValue}>코어 · 하체</span>
                  </div>
                </div>
              </div>
            </div>

            <div style={styles.row}>
              <button
                aria-label={showLeft ? '왼쪽 패널 숨기기' : '왼쪽 패널 보이기'}
                style={{
                  ...styles.edgeToggle,
                  ...styles.edgeToggleLeft,
                  ...(showLeft ? styles.edgeToggleActive : {}),
                }}
                onClick={() => setShowLeft((v) => !v)}
              >
                {showLeft ? '◀' : '▶'}
              </button>

              {showLeft ? (
                <div style={{ ...styles.panel, ...styles.leftCol }}>
                  <h2 style={styles.sectionTitle}>운동 카테고리</h2>
                  <div id="exercise_radio" style={styles.radioGroup}>
                    {EXERCISES.map((ex) => (
                      <label
                        key={ex}
                        style={{
                          ...styles.radioLabel,
                          ...(exercise === ex ? styles.radioLabelActive : {}),
                        }}
                      >
                        <input
                          type="radio"
                          name="exercise"
                          value={ex}
                          checked={exercise === ex}
                          onChange={() => setExercise(ex)}
                          style={styles.radioInput}
                        />
                        {ex}
                      </label>
                    ))}
                  </div>

                  <h2 style={{ ...styles.sectionTitle, marginTop: 24 }}>채팅 (LLM)</h2>
                  <div style={styles.chatBox}>
                    {chatMessages.map((m, idx) => (
                      <div
                        key={idx}
                        style={{
                          ...styles.chatMessage,
                          ...(m.role === 'user' ? styles.chatUser : styles.chatAssistant),
                        }}
                      >
                        <strong>{m.role === 'user' ? '사용자' : '코치'}</strong>
                        <div>{m.content}</div>
                      </div>
                    ))}
                  </div>
                  <div style={styles.chatInputRow}>
                    <textarea
                      value={chatInput}
                      onChange={(e) => setChatInput(e.target.value)}
                      placeholder="운동하면서 궁금한 점을 물어보세요."
                      rows={3}
                      style={styles.chatInput}
                    />
                    <button
                      style={{
                        ...styles.sendButton,
                        ...(isChatting ? styles.sendButtonDisabled : {}),
                      }}
                      onClick={handleSend}
                      disabled={isChatting}
                    >
                      {isChatting ? '전송 중…' : '전송'}
                    </button>
                  </div>
                </div>
              ) : null}

              <div style={{ ...styles.panel, ...styles.centerCol }}>
                <div style={styles.sectionHeader}>
                  <h2 style={styles.sectionTitle}>추천 영상 & 실시간 자세</h2>
                  <p style={styles.sectionHint}>웹캠 접근을 허용하면 오른쪽에 실시간 화면이 보입니다.</p>
                </div>
                <div style={{ display: 'flex', gap: 12 }}>
                  <div style={styles.videoWrapper}>
                    <iframe
                      width="100%"
                      height="400"
                      src={youtubeUrl}
                      title="YouTube video player"
                      frameBorder="0"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                      allowFullScreen
                    />
                    {youtubeError ? <div style={styles.helperText}>{youtubeError}</div> : null}
                  </div>
                  <video ref={videoRef} autoPlay muted playsInline style={styles.webcam} />
                </div>

                <div style={{ height: 20 }} />
                <div style={styles.feedbackHeader}>
                  <h2 style={styles.sectionTitle}>자세 피드백</h2>
                  <div style={styles.ttsControls}>
                    {!ttsSupported ? (
                      <span style={styles.ttsWarning}>브라우저가 TTS를 지원하지 않습니다.</span>
                    ) : (
                      <>
                        <button
                          style={{
                            ...styles.ttsButton,
                            ...(ttsEnabled ? styles.ttsButtonActive : {}),
                          }}
                          onClick={() => setTtsEnabled((v) => !v)}
                        >
                          {ttsEnabled ? 'TTS ON' : 'TTS OFF'}
                        </button>
                        <button
                          style={styles.ttsReplay}
                          onClick={() => speakFeedback(feedback)}
                          disabled={!ttsEnabled || !ttsSupported}
                        >
                          다시 듣기
                        </button>
                      </>
                    )}
                  </div>
                </div>
                <textarea value={feedback} readOnly rows={4} style={styles.feedbackBox} />
              </div>

              {showRight ? (
                <div style={{ ...styles.panel, ...styles.rightCol }}>
                  <h2 style={styles.sectionTitle}>지난 운동 기록</h2>
                  <table style={styles.table}>
                    <thead>
                      <tr>
                        <th>날짜</th>
                        <th>운동</th>
                        <th>세트/시간</th>
                        <th>요약 피드백</th>
                      </tr>
                    </thead>
                    <tbody>
                      {history.map((h, idx) => (
                        <tr key={idx}>
                          <td>{h.date}</td>
                          <td>{h.exercise}</td>
                          <td>{h.set}</td>
                          <td>{h.summary}</td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              ) : null}

              <button
                aria-label={showRight ? '오른쪽 패널 숨기기' : '오른쪽 패널 보이기'}
                style={{
                  ...styles.edgeToggle,
                  ...styles.edgeToggleRight,
                  ...(showRight ? styles.edgeToggleActive : {}),
                }}
                onClick={() => setShowRight((v) => !v)}
              >
                {showRight ? '▶' : '◀'}
              </button>
            </div>
          </div>
        );
      }

      const styles = {
        page: {
          fontFamily: "'Space Grotesk', 'Pretendard', 'Inter', system-ui, -apple-system, sans-serif",
          padding: '32px 24px',
          background: 'radial-gradient(circle at 20% 20%, #1f2937 0, #0b1220 45%)',
          color: '#e5e7eb',
          minHeight: '100vh',
          boxSizing: 'border-box',
          position: 'relative',
          overflow: 'hidden',
        },
        backdropGlowA: {
          position: 'absolute',
          inset: '-120px auto auto -120px',
          width: 320,
          height: 320,
          borderRadius: '50%',
          background: 'radial-gradient(circle, rgba(99,102,241,0.25), rgba(99,102,241,0))',
          filter: 'blur(40px)',
          pointerEvents: 'none',
        },
        backdropGlowB: {
          position: 'absolute',
          inset: 'auto -140px -140px auto',
          width: 360,
          height: 360,
          borderRadius: '50%',
          background: 'radial-gradient(circle, rgba(34,211,238,0.22), rgba(34,211,238,0))',
          filter: 'blur(48px)',
          pointerEvents: 'none',
        },
        header: {
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'space-between',
          maxWidth: 1200,
          margin: '0 auto 24px',
        },
        kicker: {
          margin: 0,
          fontSize: 13,
          letterSpacing: 0.6,
          color: '#9ca3af',
          textTransform: 'uppercase',
          fontWeight: 600,
        },
        title: {
          fontSize: 28,
          fontWeight: 700,
          margin: '6px 0 4px',
        },
        subtitle: {
          margin: 0,
          color: '#cdd3dc',
          fontSize: 15,
        },
        badge: {
          padding: '6px 14px',
          borderRadius: 999,
          background: 'linear-gradient(135deg, #22d3ee, #6366f1)',
          color: '#0b1220',
          fontWeight: 700,
          boxShadow: '0 10px 30px rgba(99,102,241,0.35)',
        },
        statusRow: {
          display: 'grid',
          gridTemplateColumns: '1fr',
          gap: 12,
          maxWidth: 1400,
          margin: '0 auto 16px',
        },
        heroCard: {
          padding: '16px 18px',
          borderRadius: 16,
          background: 'linear-gradient(135deg, rgba(56,189,248,0.12), rgba(99,102,241,0.08))',
          border: '1px solid rgba(255,255,255,0.08)',
          boxShadow: '0 16px 32px rgba(0,0,0,0.25)',
        },
        heroTop: {
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'space-between',
          gap: 12,
        },
        heroTitle: {
          margin: '4px 0 4px',
          fontSize: 22,
          fontWeight: 800,
          color: '#e5e7eb',
        },
        heroBadge: {
          padding: '6px 12px',
          borderRadius: 10,
          background: '#22d3ee',
          color: '#0b1220',
          fontWeight: 800,
          boxShadow: '0 10px 28px rgba(34,211,238,0.35)',
        },
        heroBottom: {
          display: 'grid',
          gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',
          gap: 8,
          marginTop: 10,
        },
        heroMetric: {
          padding: '10px 12px',
          borderRadius: 12,
          background: 'rgba(255,255,255,0.05)',
          border: '1px solid rgba(255,255,255,0.08)',
          display: 'flex',
          justifyContent: 'space-between',
          alignItems: 'center',
        },
        heroMetricLabel: {
          fontSize: 12,
          color: '#cbd5e1',
        },
        heroMetricValue: {
          fontSize: 14,
          fontWeight: 700,
          color: '#f1f5f9',
        },
        row: {
          display: 'flex',
          gap: 16,
          alignItems: 'stretch',
          maxWidth: 1400,
          margin: '0 auto',
          position: 'relative',
        },
        panel: {
          background: 'rgba(255,255,255,0.02)',
          border: '1px solid rgba(255,255,255,0.06)',
          borderRadius: 16,
          padding: 16,
          boxShadow: '0 18px 40px rgba(0,0,0,0.25)',
          backdropFilter: 'blur(8px)',
          transition: 'transform 140ms ease, border-color 140ms ease, box-shadow 140ms ease',
        },
        panelHover: {
          transform: 'translateY(-2px)',
          borderColor: 'rgba(255,255,255,0.1)',
          boxShadow: '0 22px 44px rgba(0,0,0,0.32)',
        },
        leftCol: {
          flex: '0 0 auto',
          display: 'flex',
          flexDirection: 'column',
          gap: 12,
          width: 280,
          transition: 'all 180ms ease',
        },
        centerCol: {
          flex: 3,
          minWidth: 560,
          transition: 'all 180ms ease',
        },
        rightCol: {
          flex: '0 0 auto',
          width: 280,
          transition: 'all 180ms ease',
        },
        edgeToggle: {
          position: 'absolute',
          top: 12,
          width: 44,
          height: 44,
          borderRadius: '50%',
          border: '1px solid rgba(255,255,255,0.08)',
          background: 'linear-gradient(135deg, rgba(255,255,255,0.16), rgba(255,255,255,0.06))',
          color: '#e5e7eb',
          cursor: 'pointer',
          fontSize: 14,
          fontWeight: 700,
          boxShadow: '0 10px 22px rgba(0,0,0,0.24)',
          transition: 'all 140ms ease, transform 140ms ease',
          display: 'grid',
          placeItems: 'center',
          backdropFilter: 'blur(6px)',
        },
        edgeToggleActive: {
          background: 'linear-gradient(135deg, #38bdf8, #6366f1)',
          color: '#0b1220',
          borderColor: 'transparent',
          transform: 'scale(1.04)',
        },
        edgeToggleLeft: {
          left: -4,
          transform: 'translateX(-100%)',
          zIndex: 3,
        },
        edgeToggleRight: {
          right: -4,
          transform: 'translateX(100%)',
        },
        sectionHeader: {
          display: 'flex',
          justifyContent: 'space-between',
          alignItems: 'baseline',
          marginBottom: 8,
        },
        sectionTitle: {
          fontSize: 18,
          fontWeight: 700,
          marginBottom: 8,
          color: '#f3f4f6',
        },
        sectionHint: {
          margin: 0,
          fontSize: 13,
          color: '#9ca3af',
        },
        radioGroup: {
          display: 'flex',
          gap: 8,
          flexWrap: 'wrap',
        },
        radioInput: {
          display: 'none',
        },
        radioLabel: {
          borderRadius: 12,
          padding: '8px 12px',
          border: '1px solid rgba(255,255,255,0.08)',
          cursor: 'pointer',
          fontSize: 14,
          backgroundColor: 'rgba(255,255,255,0.04)',
          color: '#d1d5db',
          transition: 'all 160ms ease',
        },
        radioLabelActive: {
          background: 'linear-gradient(135deg, #38bdf8, #6366f1)',
          color: '#0b1220',
          borderColor: 'transparent',
          boxShadow: '0 10px 25px rgba(99,102,241,0.3)',
        },
        chatBox: {
          border: '1px solid rgba(255,255,255,0.08)',
          borderRadius: 12,
          padding: 12,
          minHeight: 320,
          height: '36vh',
          overflowY: 'auto',
          background: 'rgba(255,255,255,0.03)',
        },
        chatMessage: {
          borderRadius: 10,
          padding: 8,
          marginBottom: 8,
          fontSize: 14,
          border: '1px solid rgba(255,255,255,0.05)',
        },
        chatUser: {
          backgroundColor: 'rgba(56,189,248,0.1)',
          alignSelf: 'flex-start',
        },
        chatAssistant: {
          backgroundColor: 'rgba(99,102,241,0.12)',
          alignSelf: 'flex-end',
        },
        chatInputRow: {
          display: 'flex',
          gap: 8,
          alignItems: 'stretch',
          marginTop: 8,
        },
        chatInput: {
          flex: 1,
          padding: 12,
          borderRadius: 12,
          border: '1px solid rgba(255,255,255,0.08)',
          background: 'rgba(255,255,255,0.03)',
          color: '#e5e7eb',
          resize: 'vertical',
          fontSize: 14,
          boxSizing: 'border-box',
          outline: 'none',
        },
        sendButton: {
          padding: '12px 16px',
          borderRadius: 14,
          border: 'none',
          background: 'linear-gradient(135deg, #38bdf8, #6366f1)',
          color: '#0b1220',
          cursor: 'pointer',
          fontSize: 14,
          fontWeight: 700,
          boxShadow: '0 12px 30px rgba(99,102,241,0.35)',
          transition: 'transform 120ms ease, filter 120ms ease',
          minWidth: 92,
        },
        sendButtonDisabled: {
          opacity: 0.6,
          cursor: 'not-allowed',
          boxShadow: 'none',
          transform: 'none',
        },
        videoWrapper: {
          flex: 1,
          background: 'rgba(0,0,0,0.15)',
          borderRadius: 14,
          overflow: 'hidden',
          border: '1px solid rgba(255,255,255,0.08)',
          boxShadow: '0 12px 28px rgba(0,0,0,0.35)',
        },
        webcam: {
          flex: 1,
          height: 400,
          borderRadius: 14,
          backgroundColor: '#0f172a',
          objectFit: 'cover',
          border: '1px solid rgba(255,255,255,0.08)',
          boxShadow: '0 12px 28px rgba(0,0,0,0.35)',
          transform: 'scaleX(-1)', // 좌우반전 방지 (필요 시 -1을 1로 변경)
          transformOrigin: 'center',
        },
        feedbackBox: {
          width: '100%',
          padding: 12,
          borderRadius: 12,
          border: '1px solid rgba(255,255,255,0.08)',
          backgroundColor: 'rgba(255,255,255,0.03)',
          color: '#e5e7eb',
          fontSize: 14,
          resize: 'vertical',
          boxSizing: 'border-box',
          minHeight: 120,
        },
        table: {
          width: '100%',
          borderCollapse: 'collapse',
          backgroundColor: 'rgba(255,255,255,0.03)',
          fontSize: 13,
          borderRadius: 12,
          overflow: 'hidden',
          border: '1px solid rgba(255,255,255,0.08)',
        },
        thtdCommon: {
          border: '1px solid rgba(255,255,255,0.05)',
          padding: '8px 10px',
          textAlign: 'left',
        },
        helperText: {
          marginTop: 6,
          color: '#fca5a5',
          fontSize: 12,
        },
        feedbackHeader: {
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'space-between',
          gap: 12,
        },
        ttsControls: {
          display: 'flex',
          gap: 8,
          alignItems: 'center',
        },
        ttsButton: {
          padding: '8px 12px',
          borderRadius: 12,
          border: '1px solid rgba(255,255,255,0.1)',
          background: 'rgba(255,255,255,0.08)',
          color: '#e5e7eb',
          cursor: 'pointer',
          fontSize: 12,
          fontWeight: 800,
          letterSpacing: 0.2,
        },
        ttsButtonActive: {
          background: 'linear-gradient(135deg, #22d3ee, #6366f1)',
          color: '#0b1220',
          borderColor: 'transparent',
          boxShadow: '0 10px 20px rgba(99,102,241,0.35)',
        },
        ttsReplay: {
          padding: '8px 12px',
          borderRadius: 12,
          border: '1px solid rgba(255,255,255,0.12)',
          background: 'rgba(56,189,248,0.12)',
          color: '#c1e8ff',
          cursor: 'pointer',
          fontSize: 12,
          fontWeight: 700,
        },
        ttsWarning: {
          color: '#fca5a5',
          fontSize: 12,
          fontWeight: 700,
        },
      };

      ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
  </body>
</html>
